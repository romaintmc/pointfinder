(function(){"use strict";var e={246:function(e,A,t){var i=t(963),s=t(252);function o(e,A){const t=(0,s.up)("router-view");return(0,s.wg)(),(0,s.j4)(t)}var n=t(744);const a={},r=(0,n.Z)(a,[["render",o]]);var l=r,c=t(201),u=t.p+"img/logo_pointfinder.e228cfbb.png";const d=(0,s._)("div",{class:"title-container"},[(0,s._)("h1",null,"Welcome on PointFinder !"),(0,s._)("h4",null,"Please Login or subscribe to access the application")],-1),p={class:"tabs-container"},g={key:0},h=(0,s._)("button",{type:"submit",class:"sign-button"},"Sign-in",-1),m={key:1},M={class:"form-group"},w={class:"form-group"},y={class:"form-group"},I={class:"form-group"},v=(0,s._)("button",{type:"submit",class:"sign-button"},"Sign-up",-1),E={class:"modal"},C=(0,s._)("h2",null,"Reset Password",-1),f=(0,s._)("button",{type:"submit"},"Send Reset Link",-1);function B(e,A,t,o,n,a){const r=(0,s.up)("tabs");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",null,[(0,s._)("img",{class:"logo",src:u,onClick:A[0]||(A[0]=(...e)=>a.redirectHomePage&&a.redirectHomePage(...e))}),d,(0,s._)("div",p,[(0,s.Wm)(r,{tabs:n.tabs,onTabChanged:a.updateActiveTab},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.tabs,((e,t)=>(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",{key:t},[0===t?((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("form",{onSubmit:A[4]||(A[4]=(0,i.iM)(((...e)=>a.signin&&a.signin(...e)),["prevent"]))},[(0,s._)("div",null,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":A[1]||(A[1]=e=>n.loginsignin=e),type:"text",placeholder:"Username or email",required:""},null,512),[[i.nr,n.loginsignin]]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":A[2]||(A[2]=e=>n.passwordsignin=e),type:"password",placeholder:"Password",required:""},null,512),[[i.nr,n.passwordsignin]]),(0,s._)("div",null,[(0,s._)("a",{href:"#",class:"forgot-password",onClick:A[3]||(A[3]=e=>n.showResetPasswordModal=!0)},"Forgot password?")]),h])],32)])):(0,s.kq)("",!0),1===t?((0,s.wg)(),(0,s.iD)("div",m,[(0,s._)("form",{onSubmit:A[9]||(A[9]=(0,i.iM)(((...e)=>a.signup&&a.signup(...e)),["prevent"]))},[(0,s._)("div",M,[(0,s.wy)((0,s._)("input",{id:"login","onUpdate:modelValue":A[5]||(A[5]=e=>n.loginsignup=e),type:"text",placeholder:"Username",required:""},null,512),[[i.nr,n.loginsignup]])]),(0,s._)("div",w,[(0,s.wy)((0,s._)("input",{id:"mail","onUpdate:modelValue":A[6]||(A[6]=e=>n.mail=e),type:"mail",placeholder:"E-mail",required:""},null,512),[[i.nr,n.mail]])]),(0,s._)("div",y,[(0,s.wy)((0,s._)("input",{id:"password","onUpdate:modelValue":A[7]||(A[7]=e=>n.passwordsignup=e),type:"password",placeholder:"Password",required:""},null,512),[[i.nr,n.passwordsignup]])]),(0,s._)("div",I,[(0,s.wy)((0,s._)("input",{id:"confirmpassword","onUpdate:modelValue":A[8]||(A[8]=e=>n.confirmpassword=e),type:"password",placeholder:"Confirm your password",required:""},null,512),[[i.nr,n.confirmpassword]])]),v],32)])):(0,s.kq)("",!0)])),[[i.F8,n.activeTab===t]]))),128))])),_:1},8,["tabs","onTabChanged"])])]),n.showResetPasswordModal?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"modal-overlay",onClick:A[12]||(A[12]=(0,i.iM)((e=>n.showResetPasswordModal=!1),["self"]))},[(0,s._)("div",E,[C,(0,s._)("form",{onSubmit:A[11]||(A[11]=(0,i.iM)(((...e)=>a.sendEmailResetPassword&&a.sendEmailResetPassword(...e)),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"email","onUpdate:modelValue":A[10]||(A[10]=e=>n.resetEmail=e),placeholder:"Enter your email",required:""},null,512),[[i.nr,n.resetEmail]]),f],32)])])):(0,s.kq)("",!0)],64)}var b=t(577);const D={class:"tabs"},Q=["onClick"],k={class:"tab-content"};function J(e,A,t,o,n,a){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",D,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.tabs,((e,A)=>((0,s.wg)(),(0,s.iD)("div",{key:A,onClick:e=>a.selectTab(A),class:(0,b.C_)({active:n.activeTab===A})},(0,b.zw)(e.label),11,Q)))),128))]),(0,s._)("div",k,[(0,s.wy)((0,s._)("div",null,[(0,s.WI)(e.$slots,"default",{activeTab:n.activeTab},void 0,!0)],512),[[i.F8,t.tabs[n.activeTab]]])])])}var Y={data(){return{activeTab:0}},props:{tabs:{type:Array,required:!0}},methods:{selectTab(e){this.activeTab=e,this.$emit("tab-changed",e)}}};const T=(0,n.Z)(Y,[["render",J],["__scopeId","data-v-1dd013b3"]]);var S=T,U=t(2),j={setup(){const e=(0,U.pm)();return{toast:e}},components:{Tabs:S},data(){return{tabs:[{label:"Sign-in"},{label:"Sign-up"}],activeTab:0,loginsignin:"",loginsignup:"",passwordsignin:"",passwordsignup:"",mail:"",confirmpassword:"",resetEmail:"",showResetPasswordModal:!1,showErrorMessage:!1,errorMessage:""}},methods:{redirectHomePage(){this.$router.push({path:"/"})},updateActiveTab(e){this.activeTab=e},async signup(){const e=/^[a-zA-Z0-9]+$/;if(this.loginsignup.match(e))if(this.passwordsignup===this.confirmpassword)try{const e=await fetch("https://pointfinder.alwaysdata.net/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:this.loginsignup,password:this.passwordsignup,mail:this.mail})});200===e.status?(console.log("Inscription réussie"),this.sessionStorageCredentials(this.loginsignup)):this.toast.error("Subscription error: user already exists or deleted",{position:"top-right",timeout:3e3,closeButton:"button"})}catch(A){console.error("Erreur:",A),this.toast.error("Server error",{position:"top-right",timeout:3e3,closeButton:"button"})}else this.toast.error("Subscription error: passwords do not match",{position:"top-right",timeout:3e3,closeButton:"button"});else this.toast.error("Signup error: username must contain only letters and numbers",{position:"top-right",timeout:3e3,closeButton:"button"})},async signin(){try{const e=await fetch("https://pointfinder.alwaysdata.net/signin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:this.loginsignin,password:this.passwordsignin})});200===e.status?(console.log("Connexion réussie:"),this.sessionStorageCredentials(this.loginsignin)):this.toast.error("Connection error: login or password incorrect",{position:"top-right",timeout:3e3,closeButton:"button"})}catch(e){console.error("Erreur:",e),this.toast.error("Server error",{position:"top-right",timeout:3e3,closeButton:"button"})}},async sessionStorageCredentials(e){try{const A=await fetch("https://pointfinder.alwaysdata.net/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth:e})});if(200===A.status){const e=await A.json();sessionStorage.setItem("user",JSON.stringify({username:e.login,mail:e.mail,admin:50==e.id_habilitation})),console.log(sessionStorage.getItem("user")),this.$router.push({path:"/map"})}else console.error("Erreur de réponse du serveur:",A.status)}catch(A){console.error("Erreur:",A)}},async sendEmailResetPassword(){try{const e=await fetch("https://pointfinder.alwaysdata.net/send-reset-password-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:this.resetEmail})});if(200===e.status){console.log("Email envoyé avec succès:");const A=await e.text();this.updatePassword(A)}else this.toast.error("Reset password error: please enter a valid email",{position:"bottom-center",timeout:3e3,closeButton:"button"})}catch(e){console.error("Erreur:",e)}},async updatePassword(e){try{const A=await fetch("https://pointfinder.alwaysdata.net/updatepwd",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:this.resetEmail,newpwd:e})});200===A.status?(console.log(e),this.toast.success("Password successfully updated : please check your emails",{position:"bottom-center",timeout:3e3,closeButton:"button"}),this.showResetPasswordModal=!1):this.toast.error("Server error: failed to change password",{position:"bottom-center",timeout:3e3,closeButton:"button"})}catch(A){console.error("Erreur:",A)}}}};const _=(0,n.Z)(j,[["render",B]]);var P=_,z={class:"grid-container"},O={class:"grid-item-banniere"},G={class:"grid-item",id:"description"},F={class:"grid-item",id:"equipe"},H={class:"grid-item",id:"contact"};function R(e,A,t,i,o,n){var a=(0,s.up)("Bandeau"),r=(0,s.up)("Banniere"),l=(0,s.up)("Description"),c=(0,s.up)("Team"),u=(0,s.up)("Contact");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(a),(0,s._)("div",z,[(0,s._)("div",O,[(0,s.Wm)(r)]),(0,s._)("div",G,[(0,s.Wm)(l)]),(0,s._)("div",F,[(0,s.Wm)(c)]),(0,s._)("div",H,[(0,s.Wm)(u)])])],64)}var x=t.p+"img/icon_pointfinder.d835c8b8.png";const L=(0,s.uE)('<div class="header-section section-1"><img src="'+x+'" alt="Logo" class="image-modifiee"></div><div class="header-section section-2"><a href="#description">Project</a><a href="#equipe">About Us</a><a href="#contact">Contact</a></div>',2),N={class:"header-section section-3"};function V(e,A,t,i,o,n){return(0,s.wg)(),(0,s.iD)("header",{ref:"header",class:(0,b.C_)(["header",{"gray-header":o.isScrolled}])},[L,(0,s._)("div",N,[(0,s._)("button",{class:"access-button",onClick:A[0]||(A[0]=(...e)=>n.redirect&&n.redirect(...e))},"Access to the Application")])],2)}var q={data(){return{isScrolled:!1,showParametersButton:!1}},created(){const e=JSON.parse(sessionStorage.getItem("user"));e&&(this.showParametersButton=!0)},mounted(){window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.isScrolled=window.scrollY>700},redirect(){this.$router.push({path:"/sign"})}}};const K=(0,n.Z)(q,[["render",V]]);var Z=K,X=t.p+"img/ap_glo.d8abd0e2.png";const W=e=>((0,s.dD)("data-v-3afce242"),e=e(),(0,s.Cn)(),e),$={class:"outer-grid"},ee=W((()=>(0,s._)("div",{class:"inner-grid text"},[(0,s._)("h1",null,"PointFinder"),(0,s._)("h3",null,"Mapping Moments, Finding memories"),(0,s._)("p",null,[(0,s.Uk)(" Our web and mobile solution allows you to display key locations around you. "),(0,s._)("br"),(0,s._)("br"),(0,s._)("br"),(0,s.Uk)(" Easy to use, PointFinder offers you a personalized map ideal for helping you discover the city of your choice. ")])],-1))),Ae=W((()=>(0,s._)("div",{class:"inner-grid"},[(0,s._)("img",{src:X,alt:"Capture de l'application",class:"image_temporaire"})],-1))),te=[ee,Ae];function ie(e,A){return(0,s.wg)(),(0,s.iD)("div",$,te)}const se={},oe=(0,n.Z)(se,[["render",ie],["__scopeId","data-v-3afce242"]]);var ne=oe,ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA5kAAAK1CAYAAABCTyrfAAAACXBIWXMAAC4jAAAuIwF4pT92AAAPyElEQVR4nO3XQQ3CAAAEwYMgBGk4QRs2+kIKItikSTOjYL97O47jue05AAAA+NNj22vb++QOAAAALuB+dgAAAADXYTIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMiYTAAAADImEwAAgIzJBAAAIGMyAQAAyJhMAAAAMiYTAACAjMkEAAAgYzIBAADImEwAAAAyJhMAAICMyQQAACBjMgEAAMg8tn23fU7uAAAA4AJ+gGYKvKjQxxgAAAAASUVORK5CYII=",re=t.p+"img/texture.ad35cdd0.png",le=t.p+"img/logo_slog2.774d550e.svg";const ce=e=>((0,s.dD)("data-v-c9fa5e98"),e=e(),(0,s.Cn)(),e),ue={class:"image-container"},de=ce((()=>(0,s._)("img",{src:ae,alt:"Fond",class:"fond"},null,-1))),pe=ce((()=>(0,s._)("img",{src:re,alt:"Texture",class:"texture"},null,-1))),ge=ce((()=>(0,s._)("img",{src:le,alt:"Logo et Slogan",class:"texte"},null,-1))),he=[de,pe,ge];function me(e,A){return(0,s.wg)(),(0,s.iD)("div",ue,he)}const Me={},we=(0,n.Z)(Me,[["render",me],["__scopeId","data-v-c9fa5e98"]]);var ye=we,Ie=t.p+"img/marion.fdc63346.png",ve=t.p+"img/romain.cc779855.png",Ee=t.p+"img/terence.ead0c113.png",Ce=t.p+"img/delpin.4de6b10f.png";const fe=(0,s.uE)('<h1>Team</h1><div class="image-grid"><div class="image-item"><img src="'+Ie+'" alt="Photo de Marion" class="photo_equipe"><h2> Marion DEFFEE</h2><p>Product Owner / Front-end Web Developer</p></div><div class="image-item"><img src="'+ve+'" alt="Photo de Romain" class="photo_equipe"><h2>Romain TAMIC</h2><p>Back-End Developer</p></div><div class="image-item"><img src="'+Ee+'" alt="Photo de Térence" class="photo_equipe"><h2> Térence ROUSIC </h2><p>Front-end Web Developer</p></div><div class="image-item"><img src="'+Ce+'" alt="Photo de Delphine" class="photo_equipe"><h2> Delphine ALLANO </h2><p> Front-end Mobile Developer</p></div></div>',2),Be=[fe];function be(e,A){return(0,s.wg)(),(0,s.iD)("div",null,Be)}const De={},Qe=(0,n.Z)(De,[["render",be]]);var ke=Qe,Je=t.p+"img/mail.4eea768b.png",Ye=t.p+"img/telephone.fc00c127.png";const Te=e=>((0,s.dD)("data-v-76ee0f06"),e=e(),(0,s.Cn)(),e),Se={class:"outer-grid"},Ue=(0,s.uE)('<div class="inner-grid content" data-v-76ee0f06><div class="grid-item1" data-v-76ee0f06><h1 data-v-76ee0f06>Contact us</h1></div><div class="grid-item2" data-v-76ee0f06><div class="sub-grid" data-v-76ee0f06><div class="image-container" data-v-76ee0f06><img src="'+Je+'" alt="Logo Mail" class="logo-mail" data-v-76ee0f06></div></div><div class="sub-grid" data-v-76ee0f06><p data-v-76ee0f06>Mail : pointfinder.projet@gmail.com</p></div></div><div class="grid-item2" data-v-76ee0f06><div class="sub-grid" data-v-76ee0f06><div class="image-container" data-v-76ee0f06><img src="'+Ye+'" alt="Logo Mail" class="logo-telephone" data-v-76ee0f06></div></div><div class="sub-grid" data-v-76ee0f06><p data-v-76ee0f06>Phone Number : 06 46 74 73 59</p></div></div><div class="grid-item1" data-v-76ee0f06><p data-v-76ee0f06>Based in Brest (29), our goal is to meet your needs.</p></div></div>',1),je={class:"inner-grid formuls"},_e=Te((()=>(0,s._)("label",{for:"name"},"First name: *",-1))),Pe=Te((()=>(0,s._)("label",{for:"prenom"},"Last Name: *",-1))),ze=Te((()=>(0,s._)("label",{for:"email"},"Email: *",-1))),Oe=Te((()=>(0,s._)("label",{for:"Sujet"},"Subject: *",-1))),Ge=Te((()=>(0,s._)("label",{for:"message"},"Message: *",-1))),Fe=Te((()=>(0,s._)("button",{class:"button-form-contact",type:"submit"},"SEND",-1)));function He(e,A,t,o,n,a){return(0,s.wg)(),(0,s.iD)("div",Se,[Ue,(0,s._)("div",je,[(0,s._)("form",{onSubmit:A[5]||(A[5]=(0,i.iM)(((...e)=>a.submitForm&&a.submitForm(...e)),["prevent"]))},[_e,(0,s.wy)((0,s._)("input",{type:"text",id:"name","onUpdate:modelValue":A[0]||(A[0]=e=>n.first_name=e),required:""},null,512),[[i.nr,n.first_name]]),Pe,(0,s.wy)((0,s._)("input",{type:"text",id:"prenom","onUpdate:modelValue":A[1]||(A[1]=e=>n.last_name=e),required:""},null,512),[[i.nr,n.last_name]]),ze,(0,s.wy)((0,s._)("input",{type:"email",id:"email","onUpdate:modelValue":A[2]||(A[2]=e=>n.email=e),required:""},null,512),[[i.nr,n.email]]),Oe,(0,s.wy)((0,s._)("input",{id:"sujet","onUpdate:modelValue":A[3]||(A[3]=e=>n.subject=e),required:""},null,512),[[i.nr,n.subject]]),Ge,(0,s.wy)((0,s._)("textarea",{id:"message","onUpdate:modelValue":A[4]||(A[4]=e=>n.message=e),required:""},null,512),[[i.nr,n.message]]),Fe],32)])])}var Re={setup(){const e=(0,U.pm)();return{toast:e}},data(){return{first_name:"",last_name:"",email:"",subject:"",message:"",formSubmitted:!1}},methods:{async submitForm(){try{const e=await fetch("https://pointfinder.alwaysdata.net/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({first_name:this.first_name,last_name:this.last_name,object:this.subject,body:this.message,mail:this.email})});200===e.status?(console.log("Email envoyé avec succès:"),this.toast.success("Email sent successfully !",{position:"bottom-center",timeout:3e3,closeButton:"button"})):this.toast.error("Failed to sent email",{position:"bottom-center",timeout:3e3,closeButton:"button"})}catch(e){this.toast.error("Failed to sent email",{position:"bottom-center",timeout:3e3,closeButton:"button"})}this.last_name="",this.first_name="",this.email="",this.phone="",this.subject="",this.message=""}}};const xe=(0,n.Z)(Re,[["render",He],["__scopeId","data-v-76ee0f06"]]);var Le=xe,Ne={components:{Bandeau:Z,Banniere:ye,Description:ne,Team:ke,Contact:Le}};const Ve=(0,n.Z)(Ne,[["render",R],["__scopeId","data-v-d0bbdabe"]]);var qe=Ve,Ke={class:"map-page-container"};function Ze(e,A,t,o,n,a){var r=(0,s.up)("PopSidebar"),l=(0,s.up)("Sidebar"),c=(0,s.up)("MapComponent");return(0,s.wg)(),(0,s.iD)("div",Ke,[(0,s.wy)((0,s.Wm)(r,{ref:"popSidebarRef",class:"popsidebar",libelle:o.currentMarkerData.libelle,url:o.currentMarkerData.url,opening_hours:o.currentMarkerData.opening_hours,phone_number:o.currentMarkerData.phone_number,handicap:o.currentMarkerData.handicap,description:o.currentMarkerData.description,sous_description:o.currentMarkerData.sous_description,onClosed:o.handlePopSidebarClosed},null,8,["libelle","url","opening_hours","phone_number","handicap","description","sous_description","onClosed"]),[[i.F8,!o.isSidebarVisible]]),(0,s.wy)((0,s.Wm)(l,{onSelectedTypesUpdated:o.handleSelectedTypesUpdate,class:"sidebar"},null,8,["onSelectedTypesUpdated"]),[[i.F8,o.isSidebarVisible]]),(0,s.Wm)(c,{ref:"mapComponentRef",selectedTypes:o.selectedTypes,onMarkerClicked:o.handleMarkerClick},null,8,["selectedTypes","onMarkerClicked"])])}var Xe=t(582),We=t(262),$e=t.p+"img/cross.97118d6e.png",eA={class:"pop-sidebar"},AA={class:"images-container"},tA=(0,s._)("div",{class:"logo-container"},[(0,s._)("img",{src:x,alt:"Icon PF",class:"logo-icon"})],-1),iA={class:"sidebar-title"},sA={class:"sidebar-content"},oA={class:"description-content"},nA={key:0},aA={key:1},rA={key:2},lA=(0,s._)("br",null,null,-1),cA={key:3},uA=(0,s._)("br",null,null,-1),dA={key:4},pA=(0,s._)("br",null,null,-1),gA={key:5},hA={key:6},mA=["href"],MA={key:7};function wA(e,A,t,o,n,a){return(0,s.wy)(((0,s.wg)(),(0,s.iD)("div",eA,[(0,s._)("div",AA,[(0,s._)("img",{src:$e,alt:"Fermer",class:"close-icon",onClick:A[0]||(A[0]=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];return e.hide&&e.hide.apply(e,A)})})]),tA,(0,s._)("div",iA,[(0,s._)("h2",null,(0,b.zw)(e.displayLibelle),1),(0,s._)("div",sA,[(0,s._)("div",oA,[e.dataRoute&&null!==e.dataRoute.durationInMinutes?((0,s.wg)(),(0,s.iD)("p",nA," Travel Time: "+(0,b.zw)(e.dataRoute.durationInMinutes)+" minutes ",1)):(0,s.kq)("",!0),e.dataRoute&&null!==e.dataRoute.distanceInMeters?((0,s.wg)(),(0,s.iD)("p",aA," Travel Distance: "+(0,b.zw)((e.dataRoute.distanceInMeters/1e3).toFixed(2))+" km ",1)):(0,s.kq)("",!0),"nan"!==e.description&&null!==e.description&&"null"!==e.description&&"Yes"!==e.description?((0,s.wg)(),(0,s.iD)("p",rA,[(0,s.Uk)(" Category : "),lA,(0,s.Uk)(" "+(0,b.zw)(e.displayDescription),1)])):(0,s.kq)("",!0),"nan"!==e.sous_description&&null!==e.sous_description&&"null"!==e.sous_description?((0,s.wg)(),(0,s.iD)("p",cA,[(0,s.Uk)(" Subcategory : "),uA,(0,s.Uk)(" "+(0,b.zw)(e.displaySousDescription),1)])):(0,s.kq)("",!0),"nan"!==e.opening_hours&&null!==e.opening_hours&&"null"!==e.opening_hours?((0,s.wg)(),(0,s.iD)("p",dA,[(0,s.Uk)(" Opening hours : "),pA,(0,s.Uk)(" "+(0,b.zw)(e.opening_hours),1)])):(0,s.kq)("",!0),"nan"!==e.phone_number&&null!==e.phone_number&&"null"!==e.phone_number?((0,s.wg)(),(0,s.iD)("p",gA," Mobile : "+(0,b.zw)(e.phone_number),1)):(0,s.kq)("",!0),"nan"!==e.url&&null!==e.url&&"null"!==e.url?((0,s.wg)(),(0,s.iD)("p",hA,[(0,s.Uk)(" Web site : "),(0,s._)("a",{href:e.url,target:"_blank"},(0,b.zw)(e.url),9,mA)])):(0,s.kq)("",!0),"boolean"===typeof e.handicap||"nan"!==e.handicap&&null!==e.handicap&&"null"!==e.handicap?((0,s.wg)(),(0,s.iD)("p",MA," Disabled access : "+(0,b.zw)(e.handicap?"Yes":"No"),1)):(0,s.kq)("",!0)])])])],512)),[[i.F8,e.isVisible]])}var yA=(0,We.qj)({dataRoute:{durationInMinutes:null,distanceInMeters:null}}),IA=(0,s.aZ)({props:{libelle:String,url:String,opening_hours:String,phone_number:String,handicap:[Boolean,String,Number],description:String,sous_description:String},setup:function(e,A){var t=A.emit,i=(0,s.Fl)((function(){return yA.dataRoute})),o=(0,We.iH)(!1),n=(0,s.Fl)((function(){var A;return(null===(A=e.libelle)||void 0===A?void 0:A.includes("nan"))?"Unknown name":e.libelle})),a=(0,s.Fl)((function(){var A,t=e.description;return t=c(t),(null===(A=e.description)||void 0===A?void 0:A.includes("Enclos en surface"))?"Above-ground enclosure":"Toilettes Publiques"===e.description?"Public Toilets":"Toilettes ERP"===e.description?"Restrooms for businesses receiving the public":l(t)})),r=(0,s.Fl)((function(){var A=c(e.sous_description);return l(A)}));function l(e){return void 0===e&&(e=""),e.charAt(0).toUpperCase()+e.slice(1)}function c(e){return void 0===e&&(e=""),e.replace(/_/g," ")}function u(){o.value=!0}function d(){o.value=!1,t("closed")}return{isVisible:o,show:u,hide:d,capitalizeFirstLetter:l,displayLibelle:n,displayDescription:a,displaySousDescription:r,dataRoute:i}}});const vA=(0,n.Z)(IA,[["render",wA]]);var EA=vA,CA=function(e){return(0,s.dD)("data-v-345dec6c"),e=e(),(0,s.Cn)(),e},fA={class:"sidebar"},BA=CA((function(){return(0,s._)("div",{class:"logo"},[(0,s._)("img",{src:x,alt:"Icon PF",class:"img-responsive"})],-1)})),bA={class:"switch"},DA=["id","onChange","checked"],QA=["for"];function kA(e,A,t,i,o,n){return(0,s.wg)(),(0,s.iD)("div",fA,[BA,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.interests,(function(A,t){return(0,s.wg)(),(0,s.iD)("li",{key:t},[(0,s._)("div",bA,[(0,s._)("input",{type:"checkbox",id:"switch-"+A,onChange:function(t){return e.updateSelectedTypes(A,t)},checked:e.selectedTypes[A],class:"switch-input"},null,40,DA),(0,s._)("label",{for:"switch-"+A,class:"switch-label"},null,8,QA),(0,s._)("span",null,(0,b.zw)(A),1)])])})),128))])])}var JA=(0,s.aZ)({setup:function(){var e=(0,U.pm)();return{toast:e}},data:function(){return{interests:["Restaurant","Health","Cinema","Parking","Shop","Petrol station","Toilets","Hotel"],selectedTypes:{}}},methods:{updateSelectedTypes:function(e,A){var t,i,s=A.target;if(null!==s){var o=s.checked,n=Object.values(this.selectedTypes).filter((function(e){return e})).length;o?n<2?this.selectedTypes=(0,Xe.pi)((0,Xe.pi)({},this.selectedTypes),(i={},i[e]=o,i)):(this.toast.error("Limit of 2 checkboxes reached"),s.checked=!1):this.selectedTypes=(0,Xe.pi)((0,Xe.pi)({},this.selectedTypes),(t={},t[e]=o,t)),this.$emit("selectedTypesUpdated",this.selectedTypes)}}}});const YA=(0,n.Z)(JA,[["render",kA],["__scopeId","data-v-345dec6c"]]);var TA=YA,SA=t.p+"img/center-icon.f715b9cd.png",UA={ref:"mapContainer",class:"map-container"};function jA(e,A,t,i,o,n){var a=(0,s.up)("MapButtonComponent");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",UA,[(0,s._)("img",{src:SA,alt:"Center Map",class:"center-icon",onClick:A[0]||(A[0]=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];return e.centerMapOnUser&&e.centerMapOnUser.apply(e,A)})})],512),(0,s.Wm)(a)],64)}var _A=t(243),PA=t.n(_A),zA=t.p+"img/user.1221aca5.png",OA=t.p+"img/logout.cb9a0073.png",GA=function(e){return(0,s.dD)("data-v-303df806"),e=e(),(0,s.Cn)(),e},FA={class:"menu-content"},HA={class:"texte"},RA=GA((function(){return(0,s._)("br",null,null,-1)}));function xA(e,A,t,o,n,a){return(0,s.wg)(),(0,s.iD)("div",{class:"map-button",onMouseover:A[2]||(A[2]=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];return e.showMenu&&e.showMenu.apply(e,A)}),onMouseleave:A[3]||(A[3]=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];return e.hideMenu&&e.hideMenu.apply(e,A)})},[(0,s._)("img",{src:zA,alt:"User",class:"user-icon",onClick:A[0]||(A[0]=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];return e.goToProfile&&e.goToProfile.apply(e,A)})}),(0,s.wy)((0,s._)("div",FA,[(0,s._)("div",HA,[(0,s._)("p",null,[(0,s._)("strong",null,(0,b.zw)(e.username),1),RA,(0,s.Uk)((0,b.zw)(e.mail),1)])]),(0,s._)("img",{src:OA,alt:"Logout",class:"logout-icon",onClick:A[1]||(A[1]=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];return e.logout&&e.logout.apply(e,A)})})],512),[[i.F8,e.menuVisible]])],32)}var LA=(0,s.aZ)({setup:function(){var e=(0,We.iH)(!1),A=function(){e.value=!0},t=function(){e.value=!1};return{showMenu:A,hideMenu:t,menuVisible:e}},computed:{username:function(){var e=JSON.parse(sessionStorage.getItem("user")||"{}");return e?e.username:"Guest"},mail:function(){var e=JSON.parse(sessionStorage.getItem("user")||"{}");return e?e.mail:"No email"}},methods:{goToProfile:function(){var e=JSON.parse(sessionStorage.getItem("user")||"{}");e.admin?this.$router.push("/admin"):this.$router.push("/profil")},logout:function(){sessionStorage.removeItem("user"),this.$router.push({path:"/"})}}});const NA=(0,n.Z)(LA,[["render",xA],["__scopeId","data-v-303df806"]]);var VA=NA,qA=(0,s.aZ)({components:{MapButtonComponent:VA},methods:{goToProfile:function(){var e=JSON.parse(sessionStorage.getItem("user")||"{}");1==e.admin?this.$router.push("/admin"):this.$router.push("/profil")},logout:function(){sessionStorage.removeItem("user"),this.$router.push({path:"/"})}},props:{selectedTypes:Object},emits:["markerClicked"],setup:function(e,A){var t=this,i=A.emit,o=(0,We.iH)(null),n=null,a=null,r=(0,We.iH)([]),l=new Map,c=null,u=function(){null!==c&&(c.remove(),c=null)},d={Restaurant:1,Health:2,Cinema:3,Parking:4,Shop:5,"Petrol station":6,Toilets:7,Hotel:8},p=PA().icon({iconUrl:"user-marker.png",iconSize:[20,20],iconAnchor:[10,10]}),g=function(){n&&a&&n.setView(a.getLatLng())},h=PA().icon({iconUrl:"marker-icon.png",iconSize:[25,25],iconAnchor:[12,41]}),m=function(e){return(0,Xe.mG)(t,void 0,void 0,(function(){var A,t,i,s;return(0,Xe.Jh)(this,(function(o){switch(o.label){case 0:if(A=localStorage.getItem("data_".concat(e)),A)try{return[2,JSON.parse(A)]}catch(n){console.error("Error parsing cached data:",n)}o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("https://pointfinder.alwaysdata.net/interets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code_postal:"29200",id_type:e})})];case 2:if(t=o.sent(),!t.ok)throw new Error("HTTP Error: ".concat(t.status));return[4,t.json()];case 3:return i=o.sent(),localStorage.setItem("data_".concat(e),JSON.stringify(i)),[2,i];case 4:return s=o.sent(),console.error("Error loading data:",s),[2,[]];case 5:return[2]}}))}))},M=function(){o.value&&(n=PA().map(o.value).setView([48.390394,-4.486076],13),PA().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"PointFinder&copy;"}).addTo(n),navigator.geolocation.getCurrentPosition((function(e){var A=e.coords,t=A.latitude,i=A.longitude;a=PA().marker([t,i],{icon:p}).addTo(n),a.bindPopup("You are here").openPopup()})))},w=function(){return(0,Xe.mG)(t,void 0,void 0,(function(){var A,t,s,o,c,u,p,g,M=this;return(0,Xe.Jh)(this,(function(w){switch(w.label){case 0:r.value.forEach((function(e){e.remove()})),r.value=[],A=0,t=Object.entries(null!==(g=e.selectedTypes)&&void 0!==g?g:{}),w.label=1;case 1:return A<t.length?(s=t[A],o=s[0],c=s[1],c?(u=d[o],u?[4,m(u)]:[3,3]):[3,3]):[3,4];case 2:p=w.sent(),p.forEach((function(e){var A=e.libelle,t=e.latitude,s=e.longitude,o=e.url,c=e.opening_hours,u=e.phone_number,d=e.handicap,p=e.description,g=e.sous_description,m=PA().marker([t,s],{icon:h}).addTo(n);r.value.push(m),l.set(m,{libelle:A,latitude:t,longitude:s,url:o,opening_hours:c,phone_number:u,handicap:d,description:p,sous_description:g}),m.on("click",(function(){return(0,Xe.mG)(M,void 0,void 0,(function(){var e,A;return(0,Xe.Jh)(this,(function(t){switch(t.label){case 0:return e=l.get(m),a&&n?[4,y(a.getLatLng(),m.getLatLng())]:[3,2];case 1:A=t.sent(),A?yA.dataRoute=A:console.error("addRoute n'a pas retourné de données valides."),e&&i("markerClicked",{libelle:e.libelle,url:e.url,opening_hours:e.opening_hours,phone_number:e.phone_number,handicap:e.handicap,description:e.description,sous_description:e.sous_description}),t.label=2;case 2:return[2]}}))}))}))})),w.label=3;case 3:return A++,[3,1];case 4:return[2]}}))}))},y=function(e,A){return(0,Xe.mG)(t,void 0,void 0,(function(){var t,i,s,o,a,r,l,d,p,g;return(0,Xe.Jh)(this,(function(h){switch(h.label){case 0:t="5b3ce3597851110001cf6248ff9621eb30514e4fbe61cc0453154691",i="https://api.openrouteservice.org/v2/directions/driving-car?api_key=".concat(t,"&start=").concat(e.lng,",").concat(e.lat,"&end=").concat(A.lng,",").concat(A.lat),h.label=1;case 1:return h.trys.push([1,4,,5]),u(),[4,fetch(i)];case 2:return s=h.sent(),[4,s.json()];case 3:return o=h.sent(),a=o.features[0].properties.summary.duration,r=o.features[0].properties.summary.distance,l=Math.round(a/60),d=o.features[0].geometry.coordinates,p=d.map((function(e){return[e[1],e[0]]})),null!==n&&(c=PA().polyline(p,{color:"blue"}).addTo(n),n.fitBounds(c.getBounds())),[2,{durationInMinutes:l,distanceInMeters:r}];case 4:return g=h.sent(),console.error("Error fetching route:",g),[3,5];case 5:return[2]}}))}))};return(0,s.bv)(M),(0,s.YP)((function(){var A;return null!==(A=e.selectedTypes)&&void 0!==A?A:{}}),(function(){w()}),{deep:!0}),{mapContainer:o,centerMapOnUser:g,handleClearRoute:u}}});const KA=(0,n.Z)(qA,[["render",jA]]);var ZA=KA,XA={name:"App",components:{PopSidebar:EA,Sidebar:TA,MapComponent:ZA},setup:function(){var e=(0,We.iH)(null),A=(0,We.iH)(!0),t=(0,We.qj)({}),i=(0,We.iH)({libelle:"",url:"",opening_hours:"",phone_number:"",handicap:"",description:"",sous_description:"",dataRoute:{durationInMinutes:null,distanceInMeters:null}}),o=(0,We.iH)(null),n=function(e){A.value=!0,Object.keys(e).forEach((function(A){t[A]=e[A]}))},a=function(){A.value=!0,(0,s.Y3)((function(){e.value&&e.value.handleClearRoute()}))},r=function(e){A.value=!1,i.value=(0,Xe.pi)({},e),o.value&&o.value.show()};return{selectedTypes:t,popSidebarRef:o,currentMarkerData:i,handleSelectedTypesUpdate:n,handleMarkerClick:r,isSidebarVisible:A,handlePopSidebarClosed:a,mapComponentRef:e}}};const WA=(0,n.Z)(XA,[["render",Ze]]);var $A=WA,et=t.p+"img/icone-utilisateur.b5d7513a.png",At="data:image/png;base64,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";const tt={class:"profile-page"},it={class:"profile-header"},st=(0,s._)("img",{src:et,alt:"Profil utilisateur"},null,-1),ot={class:"logout-button"},nt=(0,s._)("img",{src:At,alt:"Logout"},null,-1),at={class:"panel",id:"changeEmail"},rt=["src"],lt=(0,s._)("span",null,"Change my email",-1),ct={key:0,class:"content-container"},ut=(0,s._)("button",{type:"submit",class:"validate-button"},"Update email",-1),dt=(0,s._)("br",null,null,-1),pt={class:"panel",id:"changePassword"},gt=["src"],ht=(0,s._)("span",null,"Change my password",-1),mt={key:0,class:"content-container"},Mt=(0,s._)("button",{type:"submit",class:"validate-button"},"Update password",-1),wt=(0,s._)("br",null,null,-1),yt={class:"panel",id:"deleteAccount"},It=["src"],vt=(0,s._)("span",null,"Desactivate account",-1),Et={key:0,class:"content-container"},Ct=(0,s._)("button",{type:"submit",class:"validate-button"},"Desactivate account",-1),ft={class:"modal"},Bt=(0,s._)("p",null,"Are you sure you want to update your email ?",-1),bt={class:"modal-actions"},Dt={class:"modal"},Qt=(0,s._)("p",null,"Are you sure you want to update your password ?",-1),kt={class:"modal-actions"},Jt={class:"modal"},Yt=(0,s._)("p",null,"Are you sure you want to desactivate your account ?",-1),Tt={class:"modal-actions"};function St(e,A,o,n,a,r){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",tt,[(0,s._)("img",{class:"logo",src:u,onClick:A[0]||(A[0]=(...e)=>r.redirectMapPage&&r.redirectMapPage(...e))}),(0,s._)("div",it,[st,(0,s._)("h2",null,(0,b.zw)(r.username)+"'s profil",1),(0,s._)("h3",null,(0,b.zw)(r.mail),1)]),(0,s._)("div",ot,[(0,s._)("button",{onClick:A[1]||(A[1]=(...e)=>r.logout&&r.logout(...e))},[nt,(0,s.Uk)(" Logout ")])]),(0,s._)("div",at,[(0,s._)("div",{onClick:A[2]||(A[2]=e=>r.togglePanel("changeEmail")),class:"panel-button"},[(0,s._)("img",{src:"changeEmail"===a.activePanel?t(226):t(453),class:"arrow-icon"},null,8,rt),lt]),"changeEmail"===a.activePanel?((0,s.wg)(),(0,s.iD)("div",ct,[(0,s._)("form",{onSubmit:A[6]||(A[6]=(0,i.iM)((e=>a.showUpdateMailModal=!0),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"email","onUpdate:modelValue":A[3]||(A[3]=e=>a.currentEmail=e),placeholder:"Current email",required:""},null,512),[[i.nr,a.currentEmail]]),(0,s.wy)((0,s._)("input",{type:"email","onUpdate:modelValue":A[4]||(A[4]=e=>a.newEmail=e),placeholder:"New email",required:""},null,512),[[i.nr,a.newEmail]]),(0,s.wy)((0,s._)("input",{type:"email","onUpdate:modelValue":A[5]||(A[5]=e=>a.confirmEmail=e),placeholder:"Confirm new email",required:""},null,512),[[i.nr,a.confirmEmail]]),ut],32)])):(0,s.kq)("",!0)]),dt,(0,s._)("div",pt,[(0,s._)("div",{onClick:A[7]||(A[7]=e=>r.togglePanel("changePassword")),class:"panel-button"},[(0,s._)("img",{src:"changePassword"===a.activePanel?t(226):t(453),class:"arrow-icon"},null,8,gt),ht]),"changePassword"===a.activePanel?((0,s.wg)(),(0,s.iD)("div",mt,[(0,s._)("form",{onSubmit:A[11]||(A[11]=(0,i.iM)((e=>a.showUpdatePasswordModal=!0),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"email","onUpdate:modelValue":A[8]||(A[8]=e=>a.currentEmailPassword=e),placeholder:"Email",required:""},null,512),[[i.nr,a.currentEmailPassword]]),(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":A[9]||(A[9]=e=>a.newPassword=e),placeholder:"New password",required:""},null,512),[[i.nr,a.newPassword]]),(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":A[10]||(A[10]=e=>a.confirmPassword=e),placeholder:"Confirm new password",required:""},null,512),[[i.nr,a.confirmPassword]]),Mt],32)])):(0,s.kq)("",!0)]),wt,(0,s._)("div",yt,[(0,s._)("div",{onClick:A[12]||(A[12]=e=>r.togglePanel("deleteAccount")),class:"panel-button"},[(0,s._)("img",{src:"deleteAccount"===a.activePanel?t(226):t(453),class:"arrow-icon"},null,8,It),vt]),"deleteAccount"===a.activePanel?((0,s.wg)(),(0,s.iD)("div",Et,[(0,s._)("form",{onSubmit:A[15]||(A[15]=(0,i.iM)((e=>a.showDesactiveAccountModal=!0),["prevent"]))},[(0,s.wy)((0,s._)("input",{type:"email","onUpdate:modelValue":A[13]||(A[13]=e=>a.emailToDelete=e),placeholder:"Your email",required:""},null,512),[[i.nr,a.emailToDelete]]),(0,s.wy)((0,s._)("input",{type:"password","onUpdate:modelValue":A[14]||(A[14]=e=>a.passwordToDelete=e),placeholder:"Your password",required:""},null,512),[[i.nr,a.passwordToDelete]]),Ct],32)])):(0,s.kq)("",!0)])]),a.showUpdateMailModal?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"modal-overlay",onClick:A[17]||(A[17]=(0,i.iM)((e=>a.showUpdateMailModal=!1),["self"]))},[(0,s._)("div",ft,[Bt,(0,s._)("div",bt,[(0,s._)("button",{class:"validate-button",onClick:A[16]||(A[16]=e=>r.updateEmail())},"Confirm update")])])])):(0,s.kq)("",!0),a.showUpdatePasswordModal?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"modal-overlay",onClick:A[19]||(A[19]=(0,i.iM)((e=>a.showUpdatePasswordModal=!1),["self"]))},[(0,s._)("div",Dt,[Qt,(0,s._)("div",kt,[(0,s._)("button",{class:"validate-button",onClick:A[18]||(A[18]=e=>r.updatePassword())},"Confirm update")])])])):(0,s.kq)("",!0),a.showDesactiveAccountModal?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"modal-overlay",onClick:A[21]||(A[21]=(0,i.iM)((e=>a.showDesactiveAccountModal=!1),["self"]))},[(0,s._)("div",Jt,[Yt,(0,s._)("div",Tt,[(0,s._)("button",{class:"validate-button",onClick:A[20]||(A[20]=e=>r.desactiveAccount())},"Confirm desactivation")])])])):(0,s.kq)("",!0)],64)}var Ut={setup(){const e=(0,U.pm)();return{toast:e}},data(){return{activePanel:null,currentEmail:"",newEmail:"",confirmEmail:"",currentEmailPassword:"",newPassword:"",confirmPassword:"",emailToDelete:"",passwordToDelete:"",showUpdatePasswordModal:!1,showUpdateMailModal:!1,showDesactiveAccountModal:!1,userProfileUpdated:0}},computed:{username(){const e=JSON.parse(sessionStorage.getItem("user"));return e?e.username:"Guest"},mail(){this.userProfileUpdated;const e=JSON.parse(sessionStorage.getItem("user"));return e?e.mail:"No email"}},methods:{togglePanel(e){this.activePanel=this.activePanel===e?null:e},async updateEmail(){if(this.newEmail===this.confirmEmail)try{const e=await fetch("https://pointfinder.alwaysdata.net/updatemail",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:this.currentEmail,newmail:this.newEmail})});if(200===e.status){console.log(this.newEmail);const e=JSON.parse(sessionStorage.getItem("user"));e.mail=this.newEmail,sessionStorage.setItem("user",JSON.stringify(e)),this.userProfileUpdated++,this.showUpdateMailModal=!1,this.toast.success("Email address successfully updated !",{position:"top-right",timeout:3e3,closeButton:"button"})}else this.toast.error("Update email error: please enter an existing email address",{position:"top-right",timeout:3e3,closeButton:"button"});this.currentEmail=null,this.newEmail=null,this.confirmEmail=null}catch(e){console.error("Erreur:",e)}else this.toast.error("Update email error: email adresses do not match",{position:"top-right",timeout:3e3,closeButton:"button"})},async updatePassword(){if(this.newPassword===this.confirmPassword)try{const e=await fetch("https://pointfinder.alwaysdata.net/updatepwd",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:this.currentEmailPassword,newpwd:this.newPassword})});200===e.status?(console.log(this.newPassword),this.showUpdatePasswordModal=!1,this.toast.success("Password successfully updated !",{position:"top-right",timeout:3e3,closeButton:"button"})):this.toast.error("Update password error: please verify the email you entered",{position:"top-right",timeout:3e3,closeButton:"button"}),this.currentEmailPassword=null,this.newPassword=null,this.confirmPassword=null}catch(e){console.error("Erreur:",e)}else this.toast.error("Update password error: passwords do not match",{position:"top-right",timeout:3e3,closeButton:"button"})},async desactiveAccount(){try{const e=await fetch("https://pointfinder.alwaysdata.net/inactiveuser",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:this.emailToDelete,password:this.passwordToDelete})});200===e.status?(console.log("Compte suspendu"),this.logout()):this.toast.error("Account suspension error: please enter an existing email or password",{position:"top-right",timeout:3e3,closeButton:"button"})}catch(e){console.error("Erreur:",e)}},redirectMapPage(){this.$router.push({path:"/map"})},logout(){sessionStorage.removeItem("user"),this.$router.push({path:"/"})}}};const jt=(0,n.Z)(Ut,[["render",St]]);var _t=jt;const Pt={class:"admin-page-container"},zt={class:"logout-button"},Ot=(0,s._)("img",{src:At,alt:"Logout"},null,-1),Gt={class:"search-container"},Ft={class:"cards-container"},Ht=(0,s._)("img",{class:"user-image",src:et},null,-1),Rt=["onClick"],xt={key:0,class:"user-info"},Lt={key:1,class:"user-edit-form"},Nt=["onUpdate:modelValue"],Vt=["onUpdate:modelValue"],qt={class:"card-buttons"},Kt=["onClick"],Zt=["onClick"],Xt=["onClick"],Wt={class:"modal"},$t=(0,s._)("p",null,"Are you sure you want to delete definitively this user:",-1),ei={class:"modal-actions"},Ai={class:"modal"},ti=(0,s._)("p",null,"Are you sure you want to update this user:",-1),ii={class:"modal-actions"},si={class:"modal"},oi=(0,s._)("p",null,"Are you sure you want to activate this user:",-1),ni={class:"modal-actions"};function ai(e,A,t,o,n,a){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",Pt,[(0,s._)("img",{class:"logo",src:u,onClick:A[0]||(A[0]=(...e)=>a.redirectMapPage&&a.redirectMapPage(...e))}),(0,s._)("div",zt,[(0,s._)("button",{onClick:A[1]||(A[1]=(...e)=>a.logout&&a.logout(...e))},[Ot,(0,s.Uk)(" Logout ")])]),(0,s._)("div",Gt,[(0,s.wy)((0,s._)("input",{type:"text","onUpdate:modelValue":A[2]||(A[2]=e=>n.searchQuery=e),placeholder:"Search by username or email...",onInput:A[3]||(A[3]=(...e)=>a.filterUsers&&a.filterUsers(...e))},null,544),[[i.nr,n.searchQuery]])]),(0,s._)("div",Ft,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.filteredUsers,(e=>((0,s.wg)(),(0,s.iD)("div",{class:(0,b.C_)(["user-card",{"inactive-user":0===e.active}]),key:e.originalMail},[Ht,(0,s._)("img",{class:"delete-icon",src:$e,onClick:A=>a.promptDeleteUser(e)},null,8,Rt),n.editingUsers[e._uid.toString()]?((0,s.wg)(),(0,s.iD)("div",Lt,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":A=>e.login=A,type:"text"},null,8,Nt),[[i.nr,e.login]]),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":A=>e.mail=A,type:"email"},null,8,Vt),[[i.nr,e.mail]])])):((0,s.wg)(),(0,s.iD)("div",xt,[(0,s._)("h3",null,(0,b.zw)(e.login),1),(0,s._)("p",null,(0,b.zw)(e.mail),1)])),(0,s._)("div",qt,[0===e.active?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"activate-btn",onClick:A=>a.promptActivateUser(e)},"Activate User",8,Kt)):(0,s.kq)("",!0),n.editingUsers[e._uid.toString()]?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"cancel-btn",onClick:A=>a.cancelEdit(e)},"Cancel",8,Zt)):(0,s.kq)("",!0),0!==e.active?((0,s.wg)(),(0,s.iD)("button",{key:2,class:(0,b.C_)(["edit-btn",{editing:n.editingUsers[e._uid.toString()]}]),onClick:A=>a.toggleEdit(e)},(0,b.zw)(n.editingUsers[e._uid.toString()]?"Save User":"Edit User"),11,Xt)):(0,s.kq)("",!0)])],2)))),128))])]),n.showDeleteUserModal?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"modal-overlay",onClick:A[5]||(A[5]=(0,i.iM)((e=>n.showDeleteUserModal=!1),["self"]))},[(0,s._)("div",Wt,[$t,(0,s._)("p",null,[(0,s._)("strong",null,(0,b.zw)(n.selectedUserForDeletion?n.selectedUserForDeletion.login:""),1)]),(0,s._)("div",ei,[(0,s._)("button",{onClick:A[4]||(A[4]=e=>a.deleteUser())},"Delete User")])])])):(0,s.kq)("",!0),n.showUpdateUserModal?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"modal-overlay",onClick:A[7]||(A[7]=(0,i.iM)((e=>n.showUpdateUserModal=!1),["self"]))},[(0,s._)("div",Ai,[ti,(0,s._)("p",null,[(0,s._)("strong",null,(0,b.zw)(n.originalValues[n.selectedUserForUpdate?._uid.toString()]?n.originalValues[n.selectedUserForUpdate._uid.toString()].login:""),1)]),(0,s._)("div",ii,[(0,s._)("button",{onClick:A[6]||(A[6]=e=>a.updateMailLogin())},"Update User")])])])):(0,s.kq)("",!0),n.showActivateUserModal?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"modal-overlay",onClick:A[9]||(A[9]=(0,i.iM)((e=>n.showActivateUserModal=!1),["self"]))},[(0,s._)("div",si,[oi,(0,s._)("p",null,[(0,s._)("strong",null,(0,b.zw)(n.selectedUserForActive?n.selectedUserForActive.login:""),1)]),(0,s._)("div",ni,[(0,s._)("button",{onClick:A[8]||(A[8]=e=>a.activateUser())},"Activate User")])])])):(0,s.kq)("",!0)],64)}var ri={setup(){const e=(0,U.pm)();return{toast:e}},data(){return{users:[],filteredUsers:[],searchQuery:"",editingUsers:{},originalValues:{},selectedUserForDeletion:null,showDeleteUserModal:!1,selectedUserForUpdate:null,showUpdateUserModal:!1,selectedUserForActive:null,showActivateUserModal:!1}},mounted(){this.fetchUsers()},methods:{async fetchUsers(){try{const e=await fetch("https://pointfinder.alwaysdata.net/receiveusers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({choice:2})});if(200===e.status){console.log("Liste des utilisateurs récupérée");const A=await e.json();this.users=A.map(((e,A)=>({...e,originalMail:e.mail,_uid:A}))),this.filteredUsers=this.users}else console.log("Erreur lors de la récupération des utilisateurs")}catch(e){console.error("Erreur :",e)}},filterUsers(){this.searchQuery?this.filteredUsers=this.users.filter((e=>e.login.toLowerCase().includes(this.searchQuery.toLowerCase())||e.mail.toLowerCase().includes(this.searchQuery.toLowerCase()))):this.filteredUsers=this.users},promptActivateUser(e){this.selectedUserForActive=e,this.showActivateUserModal=!0},async activateUser(){const e=this.selectedUserForActive;try{const A=await fetch("https://pointfinder.alwaysdata.net/activeuser",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:e.mail})});200===A.status?(console.log("Utilisateur activé avec succès"),this.toast.success("User successfully activated !",{position:"top-right",timeout:3e3,closeButton:"button"}),this.showActivateUserModal=!1,this.selectedUserForActive=null,this.fetchUsers()):(console.log("Erreur lors de l'activation de l'utilisateur"),this.toast.error("Error activating user.",{position:"top-right",timeout:3e3,closeButton:"button"}))}catch(A){console.error("Erreur lors de l'activation:",A),this.toast.error("Error activating user.",{position:"top-right",timeout:3e3,closeButton:"button"})}},toggleEdit(e){const A=e._uid.toString();this.editingUsers[A]?(this.selectedUserForUpdate={...e},this.showUpdateUserModal=!0):(this.originalValues[A]={...e},this.editingUsers[A]=!0)},cancelEdit(e){const A=e._uid.toString();this.originalValues[A]&&(Object.assign(e,this.originalValues[A]),delete this.editingUsers[A])},promptDeleteUser(e){this.selectedUserForDeletion=e,this.showDeleteUserModal=!0},async deleteUser(){const e=this.selectedUserForDeletion;try{const A=await fetch("https://pointfinder.alwaysdata.net/deleteuser",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({mail:e.mail})});200===A.status?(console.log(`Suppression de l'utilisateur ${this.selectedUserForDeletion.login}`),this.showDeleteUserModal=!1,this.selectedUserForDeletion=null,this.fetchUsers(),this.toast.success("User successfully deleted !",{position:"top-right",timeout:3e3,closeButton:"button"})):this.toast.error("Failed to delete user",{position:"top-right",timeout:3e3,closeButton:"button"})}catch(A){console.error("Erreur:",A)}},async updateMailLogin(){const e=this.selectedUserForUpdate,A=e._uid.toString();if(e.mail&&e.originalMail&&e.login)try{const t=await fetch("https://pointfinder.alwaysdata.net/updatemaillogin",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newlogin:e.login,mail:e.originalMail,newmail:e.mail})});200===t.status?(console.log("User update successful."),delete this.editingUsers[A],this.showUpdateUserModal=!1,this.selectedUserForUpdate=null,this.toast.success("User successfully updated!",{position:"top-right",timeout:3e3,closeButton:"button"}),await this.fetchUsers()):(console.error("Error updating user."),this.toast.error("Failed to update user.",{position:"top-right",timeout:3e3,closeButton:"button"}))}catch(t){console.error("Update error:",t),this.toast.error("Update failed due to an error.",{position:"top-right",timeout:3e3,closeButton:"button"})}else this.toast.error("Missing user information for update.",{position:"top-right",timeout:3e3,closeButton:"button"})},redirectMapPage(){this.$router.push({path:"/map"})},logout(){sessionStorage.removeItem("user"),this.$router.push({path:"/"})}}};const li=(0,n.Z)(ri,[["render",ai]]);var ci=li;const ui={class:"unauthorized-container"},di=(0,s._)("h1",null,"403 - Unauthorized Access",-1),pi=(0,s._)("p",null,"Sorry, you do not have permission to access this page, or you tried to access directly to this error page.",-1);function gi(e,A,t,i,o,n){return(0,s.wg)(),(0,s.iD)("div",ui,[di,pi,(0,s._)("button",{onClick:A[0]||(A[0]=(...e)=>n.goHome&&n.goHome(...e))},"Go back to home")])}var hi={methods:{goHome(){this.$router.push("/")}}};const mi=(0,n.Z)(hi,[["render",gi]]);var Mi=mi,wi=[{path:"/",name:"Home",component:qe},{path:"/sign",name:"Sign",component:P},{path:"/map",name:"Map",component:$A},{path:"/profil",name:"Profil",component:_t},{path:"/admin",name:"Admin",component:ci},{path:"/unauthorized",name:"Unauthorized",component:Mi}],yi=(0,c.p7)({history:(0,c.PO)("/"),routes:wi});yi.beforeEach((function(e,A,t){var i=sessionStorage.getItem("user"),s=JSON.parse(i||"{}");"/sign"===e.path||"/"===e.path||i?"/sign"===e.path&&i?t("/map"):"/admin"===e.path&&0==s.admin?t("/unauthorized"):t():t("/sign")}));var Ii=yi;t(343);(0,i.ri)(l).use(Ii).use(U.ZP,{transition:"Vue-Toastification__bounce",maxToasts:1}).mount("#app")},226:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAADsQAAA7EB9YPtSQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAM4SURBVHic7d29alRBHIbxJ5hGSEA0id9Y2CjaWFlYKX4EMZfgJeg1KFprKXYWVtqphSAq1haCKWInqAjRFArRkICuxdmFRdaNmz0zc2bO84OBQEjyn33fGZZk2YAkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSWq6iZq+z35gATgDHABmgK/AB+AZ8AT4UtPPaovdwCXgHHAQmAVWgE/Ac+Ax8DnZdF37gLvABtAZsn4Ct4BdacbMygxwG1hj+GO6AdwB9qYZE04By0MGHLQ+AidTDJuJE8B7RntMV4DTsQe9CKyPOGhvrQHzsQfOwDybn/p/rXWqTKI4Cnzf4qCWYLBxwu+tb8CRGMO+GHPQ/tYuxBi44c4zfvi99SrGsHUM6k1QqePk/73Ohhz4fs3DtvkmqPPk9697oQaeoHrGWffAbbwJQpz83gr2+5bZQAO37SYIdfL7184Qgx8PPHQbboKQJ79/HQsx/OEIg5d8E8Q4+b11KMQGpoDfkTZQ2k0Q6+R3gF/A9lAbeRNpEyXdBDFPfgd4HXIzNyJupISbIObJ761rITe0B/gReUO53gSxT34HWKX6M3JQNyNvKsebIMXJ7wDXY2xuEniZYHO53AQpTn6H6m80kxH2B1S/FFoMvKEcb4JUJ3+RKpOoZoG3Yw5e0k2Q6uQvUT03S8ISVC7QwvB72l6CVoff09YSGH6ftpXA8AdoSwkMf4jSS2D4/6HUEhj+CEorgeFvQSklMPwx5F4Cw69BriUw/BrlVgLDDyCXEhh+QE0vgeFH0NQSGH5ETSuB4SfQlBIYfkKpS2D4DTBHutcYpnoN31wtj1xBUt0EnvwGKb0ESyR8W7dclFoCwx9BaSUw/C0opQSGP4bcS2D4Nci1BIZfo9xKYPgB5FICww+o6SUw/AiaWgLDj6hpJTD8BJpSAsNPKHUJDL8BUpXA8BskdgkMv4FilcDwGyx0CQw/A6FKYPgZqbsEhp+hukpg+Bkb99XGvnq3ANPAI0YP/ymwI8G8CmAbcJXqP2ptFvwycKX7NSrMNHAZeAi8o3p//dXuxw+6n5tKNp0kSZIkSZIkSZIkSZIkSZIkSZIkSZIkSdIAfwCHj0fOYebyPAAAAABJRU5ErkJggg=="},453:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAAAOwAAADsAEnxA+tAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAnFJREFUeJzt3b1qFFEYh/HHjyhq4QUI3oOI9noNVjaKGjUXY5MmZbqICtrYCzYWXoCIhZBWBBsbxV0LGzFgZnbmvHPOeZ8fbJ0Z/s9+ZSdZkCRJkiRJkiRJkiRJUldOLH0AA5wH7gI3gYvAB+Ap8G7BY1KQq8AhsP7ntgJ2ga3lDk2lXQK+cHT8v28vMYJu7fL/8Y2gcx8ZFsAaeA2cXeYwVcoPhgfgI0GHxozvI0GHNgnACDqyaQBG0IkpARhBB6YGYASNmyMAI2jYXAEYQaPmDMAIGjR3AEbQmBIBGEFDSgVgBI1YUTYCPzuo3HHXAhhB555TPgAjqNgVxn8kbASduUf51wJGULn7wC9iIvDdQaWMQEYgIxBGIIxAGIEwAmEEwgiEEQgjEEYgjEAYgTACYQTCCIQRCCMQRiDgEXFXGx/Qxr/kTScygttB56SRop4O3kadkMaLiOB72NmMdHLpA6hAxPPzKuBnaAMPiHkKeBN1Qhou8kXgraBz0kCPiRt/P+icNFDUw/4aeAGcjjktDbGN46fl+Ik5fmKOn5jjJ7ZN3Fs9x6+M4yfm+Ik5fmKOn5jjJ/YQx0/L8RNz/MQcPzHHT8zxE3P8xCIv4HT8yjh+YjvEjf8Mx6/KdeAnjp/WKxw/tW84flpbOH5qZyg7vq/2K1cyAMdvQKkAHL8RJQJw/IbMHYDjN2bOABy/QXMF4PiNmiMAx2/Y1AAcv3FTAnD8DmwagON34hTj/67f3+135jPe81Pbw3t+apeBrzh+ateAQ44OvwKe4PiTtfBNFheAO8AN4BzwiT/fwvF+yYOSJEmSJEmSJEmSJEmSqvQbrEcvieO83scAAAAASUVORK5CYII="}},A={};function t(i){var s=A[i];if(void 0!==s)return s.exports;var o=A[i]={exports:{}};return e[i].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(A,i,s,o){if(!i){var n=1/0;for(c=0;c<e.length;c++){i=e[c][0],s=e[c][1],o=e[c][2];for(var a=!0,r=0;r<i.length;r++)(!1&o||n>=o)&&Object.keys(t.O).every((function(e){return t.O[e](i[r])}))?i.splice(r--,1):(a=!1,o<n&&(n=o));if(a){e.splice(c--,1);var l=s();void 0!==l&&(A=l)}}return A}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,s,o]}}(),function(){t.n=function(e){var A=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(A,{a:A}),A}}(),function(){t.d=function(e,A){for(var i in A)t.o(A,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:A[i]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,A){return Object.prototype.hasOwnProperty.call(e,A)}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(A){return 0===e[A]};var A=function(A,i){var s,o,n=i[0],a=i[1],r=i[2],l=0;if(n.some((function(A){return 0!==e[A]}))){for(s in a)t.o(a,s)&&(t.m[s]=a[s]);if(r)var c=r(t)}for(A&&A(i);l<n.length;l++)o=n[l],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(c)},i=self["webpackChunkpointfinder"]=self["webpackChunkpointfinder"]||[];i.forEach(A.bind(null,0)),i.push=A.bind(null,i.push.bind(i))}();var i=t.O(void 0,[998],(function(){return t(246)}));i=t.O(i)})();
//# sourceMappingURL=app.033b5154.js.map